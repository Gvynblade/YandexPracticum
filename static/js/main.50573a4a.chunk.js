(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{105:function(e,t,r){e.exports={BurgerMain:"burger-main_BurgerMain__hwMv5"}},106:function(e,t,r){e.exports={section:"burger-ingredients_section__3-AoN"}},107:function(e,t,r){e.exports={ingredientsBox:"ingredients-box_ingredientsBox__opvcO"}},109:function(e,t,r){e.exports={block:"ingredients-switcher_block__jKPCu"}},11:function(e,t,r){e.exports={feedColumn:"feed-right_feedColumn__23AgL",ordersList:"feed-right_ordersList__33q-J",ordersList__ready:"feed-right_ordersList__ready__14jKI",ordersList__inProgress:"feed-right_ordersList__inProgress__2SSJB",ordersList__header:"feed-right_ordersList__header__2F2t7",ordersList__col1:"feed-right_ordersList__col1__1La4Y",ordersList__col2:"feed-right_ordersList__col2__3dTeK",ordersList__item:"feed-right_ordersList__item__10dFy",ready:"feed-right_ready__3FQr3",ordersCounter:"feed-right_ordersCounter__34NB1"}},110:function(e,t,r){e.exports={overlay:"modal-overlay_overlay__3CzER"}},111:function(e,t,r){e.exports={orders:"profile-orders-history_orders__36-U1"}},112:function(e,t,r){e.exports={page:"not-found_page__19qM1"}},113:function(e,t,r){e.exports={feedColumn:"feed-left_feedColumn__1aZuM"}},114:function(e,t,r){e.exports={order:"order_order__1wKAQ"}},123:function(e,t,r){},14:function(e,t,r){e.exports={ingredientBox:"ingredient-details_ingredientBox__13TO3",ingredientImg:"ingredient-details_ingredientImg__2xqps",ingredientInfo:"ingredient-details_ingredientInfo__1n8Bw",ingredientInfo__item:"ingredient-details_ingredientInfo__item__3skvY"}},205:function(e,t,r){},206:function(e,t,r){},207:function(e,t,r){},211:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(33),c=r.n(s),i=(r(123),r(12)),o=r(6),d=r(26),l=r.n(d),u=r(4),p=r(42),_=p.c,m=function(){return Object(p.b)()},j=r(5),b=r.n(j),f=r(8),x=r(2);function h(e,t,r){var n=(r=r||{}).expires;if("number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=r.expires=a}n&&n.toUTCString&&(r.expires=n.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var c in r){s+="; "+c;var i=r[c];!0!==i&&(s+="="+i)}document.cookie=s}function O(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var g,v="https://norma.nomoreparties.space/api/orders",y="https://norma.nomoreparties.space/api/auth/user",N=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients",{headers:{"Content-Type":"application/json;charset=utf-8"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},R=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+O("token")},body:JSON.stringify({ingredients:e})});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",Object(x.a)({},r));case 7:case"end":return t.stop()}}),t)})))()},S=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+O("token")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},T=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/orders/all",{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+O("token")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},I=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},E=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},C=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},k=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},w=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},D=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},L=function(){return Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y,{headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+O("token")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},A=function(e){return Object(f.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(y,{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+O("token")},body:JSON.stringify(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},M="authReducer/REGISTRATION_REQUEST",U="authReducer/REGISTRATION_SUCCESS",q="authReducer/REGISTRATION_ERROR",P="authReducer/LOGIN_REQUEST",B="authReducer/LOGIN_SUCCESS",G="authReducer/LOGIN_ERROR",z="authReducer/FORGOT_PASSWORD",F="authReducer/FORGOT_PASSWORD_SUCCESS",W="authReducer/FORGOT_PASSWORD_ERROR",H="authReducer/REQUEST_NEW_PASSWORD",J="authReducer/RESET_PASSWORD_SUCCESS",Q="authReducer/RESET_PASSWORD_ERROR",Z="authReducer/SET_AUTHORISED",K="authReducer/SET_AUTHORISED",X="authReducer/GET_USER_DATA",Y="authReducer/GET_USER_DATA_SUCCES",V="authReducer/GET_USER_DATA_ERROR",$="authReducer/UPDATE_USER_DATA",ee="authReducer/UPDATE_USER_DATA_SUCCES",te="authReducer/UPDATE_USER_DATA_ERROR",re="authReducer/REQUEST_LOGOUT",ne="authReducer/REQUEST_LOGOUT_SUCCES",ae="authReducer/REQUEST_LOGOUT_ERROR",se=r(0),ce=function(){var e=m(),t=Object(i.h)();return Object(n.useEffect)((function(){localStorage.getItem("refreshToken")?e({type:Z,payload:{isAuthorised:!0}}):e({type:K,payload:{isAuthorised:!1}})}),[e]),Object(se.jsx)("header",{className:"".concat(l.a.header," p-4"),children:Object(se.jsxs)("nav",{className:"".concat(l.a.nav," container"),children:[Object(se.jsxs)(o.c,{to:"/",className:"".concat(l.a.navItem," p-5 text text_type_main-default"),activeClassName:"/"!==t.pathname?void 0:l.a.active,children:["  ",Object(se.jsx)(u.BurgerIcon,{type:"/"!==t.pathname?"secondary":"primary"})," ",Object(se.jsx)("span",{className:"pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(se.jsxs)(o.c,{to:"/feed",className:"".concat(l.a.navItem," p-5 ml-2 text text_type_main-default"),activeClassName:l.a.active,children:["  ",Object(se.jsx)(u.ListIcon,{type:-1!==t.pathname.indexOf("/feed")?"primary":"secondary"})," ",Object(se.jsx)("span",{className:"pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(se.jsx)("div",{className:l.a.logo,children:Object(se.jsx)(o.c,{to:"/",children:Object(se.jsx)(u.Logo,{})})}),Object(se.jsxs)(o.c,{to:"/profile",className:"".concat(l.a.navItem," p-5 text text_type_main-default"),activeClassName:l.a.active,children:["  ",Object(se.jsx)(u.ProfileIcon,{type:-1!==t.pathname.indexOf("/profile")?"primary":"secondary"})," ",Object(se.jsx)("span",{className:"pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},ie=r(216),oe=r(116),de=r(105),le=r.n(de),ue=r(106),pe=r.n(ue),_e=function(){return Object(se.jsxs)("section",{className:pe.a.section,children:[Object(se.jsx)("h1",{className:"text text_type_main-large mt-10  mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(se.jsx)(Je,{}),Object(se.jsx)(Fe,{})]})},me=r(14),je=r.n(me),be=function(){var e=_((function(e){return e.burgerIngredients})).modalData;return Object(se.jsxs)("div",{className:je.a.ingredientBox,children:[Object(se.jsx)("img",{src:null===e||void 0===e?void 0:e.image_large,alt:null===e||void 0===e?void 0:e.name,className:je.a.ingredientImg}),Object(se.jsx)("p",{className:"text text_type_main-medium pt-4 pb-8",children:null===e||void 0===e?void 0:e.name}),Object(se.jsxs)("div",{className:je.a.ingredientInfo,children:[Object(se.jsxs)("div",{className:je.a.ingredientInfo__item,children:[Object(se.jsx)("span",{className:je.a.ingredientInfo__name,children:Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"})}),Object(se.jsx)("span",{className:je.a.ingredientInfo__value,children:Object(se.jsx)("p",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.calories})})]}),Object(se.jsxs)("div",{className:je.a.ingredientInfo__item,children:[Object(se.jsx)("span",{className:je.a.ingredientInfo__name,children:Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"})}),Object(se.jsx)("span",{className:je.a.ingredientInfo__value,children:Object(se.jsx)("p",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.proteins})})]}),Object(se.jsxs)("div",{className:je.a.ingredientInfo__item,children:[Object(se.jsx)("span",{className:je.a.ingredientInfo__name,children:Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"})}),Object(se.jsx)("span",{className:je.a.ingredientInfo__value,children:Object(se.jsx)("p",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.fat})})]}),Object(se.jsxs)("div",{className:je.a.ingredientInfo__item,children:[Object(se.jsx)("span",{className:je.a.ingredientInfo__name,children:Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"})}),Object(se.jsx)("span",{className:je.a.ingredientInfo__value,children:Object(se.jsx)("p",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.carbohydrates})})]})]})]})},fe=r(9),xe=r(107),he=r.n(xe),Oe=r(55),ge=r.n(Oe),ve=r(217),ye=r(43),Ne=r.n(ye),Re=function(e){var t=e.data,r=e.handleModalOpen,n=Object(ve.a)({type:"ingredient",item:{_id:t._id},collect:function(e){return{isDrag:e.isDragging()}}}),a=Object(fe.a)(n,2),s=a[0].isDrag,c=a[1];return Object(se.jsx)(se.Fragment,{children:!s&&Object(se.jsxs)("div",{className:"".concat(Ne.a.ingredient," mb-8"),onClick:function(){return r(t)},ref:c,children:[0!==t.__v&&Object(se.jsx)("div",{className:Ne.a.ingredient__counter,children:Object(se.jsx)(u.Counter,{count:t.__v,size:"default"})}),Object(se.jsx)("img",{src:t.image,alt:t.name,className:"pl-4 pr-4"}),Object(se.jsxs)("div",{className:"".concat(Ne.a.ingredient__price," text text_type_digits-default pt-1 pb-2"),children:[Object(se.jsx)("span",{className:"pr-1",children:t.price})," ",Object(se.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(se.jsx)("span",{className:"".concat(Ne.a.ingredient__title," text text_type_main-default"),children:t.name})]})})},Se=a.a.forwardRef((function(e,t){var r=e.ingredients,n=e.handleModalOpen,a=e.header;return Object(se.jsxs)("div",{className:"".concat(ge.a.section," pb-2"),ref:t,children:[Object(se.jsx)("h2",{className:"".concat(ge.a.section__title," text text_type_main-medium pb-6"),children:a}),Object(se.jsx)("div",{className:"".concat(ge.a.section__flex," pl-4 pr-2"),children:r.map((function(e){return Object(se.jsx)(Re,{data:e,handleModalOpen:n},e._id)}))})]})})),Te=r(78),Ie=r.n(Te),Ee=r.p+"static/media/spinner.e9df1df7.gif",Ce=function(){return Object(se.jsxs)("div",{className:"".concat(Ie.a.preloader," container"),children:[Object(se.jsx)("img",{src:Ee,alt:"Data fetching in progress"}),Object(se.jsx)("p",{className:"".concat(Ie.a.preloader_description," text text_type_main-medium"),children:"Fetching data, please wait..."})]})},ke="ingredientsReducer/INGREDIENTS_REQUEST",we="ingredientsReducer/INGREDIENTS_SUCCESS",De="ingredientsReducer/IINGREDIENTS_ERROR",Le="ingredientsReducer/SET_MODAL_DATA",Ae="ingredientsReducer/REMOVE_MODAL_DATA",Me="ingredientsReducer/SET_CURRENT_TAB",Ue="ingredientsReducer/INCREASE_ITEM_COUNTER",qe="ingredientsReducer/DECREASE_ITEM_COUNTER",Pe="ingredientsReducer/CLEAR_ITEMS_COUNTER",Be="appReducer/TOGGLE_IS_FETCHING",Ge="appReducer/MODAL_OPEN",ze="appReducer/MODAL_CLOSE",Fe=function(){var e=_((function(e){return e.burgerIngredients})),t=e.ingredients,r=e.ingredientsRequest,n=m(),s=Object(i.g)(),c=a.a.useState({buns:null,sauces:null,mains:null}),o=Object(fe.a)(c,2),d=o[0],l=o[1],u=[],p=[],j=[];t.forEach((function(e){switch(e.type){case"bun":u.push(e);break;case"main":p.push(e);break;case"sauce":j.push(e)}}));var b=function(e){n({type:Ge,payload:{isModalOpen:!0,modalType:"ingredient"}}),n({type:Le,payload:{modalData:e}}),s.push("/ingredients/"+e._id)},f=a.a.useRef(null),x=a.a.useRef(null),h=a.a.useRef(null),O=a.a.useRef(null);return Object(se.jsx)("div",{className:"".concat(he.a.ingredientsBox," pt-10"),ref:f,onScroll:function(e){return function(e){l({buns:null===x.current?d.buns:x.current.offsetTop,sauces:null===h.current?d.sauces:h.current.offsetTop,mains:null===O.current?d.mains:O.current.offsetTop});var t=e.target.scrollTop;t<d.sauces&&n({type:Me,payload:{currentTab:"buns"}}),t>=d.sauces&&t<d.mains&&n({type:Me,payload:{currentTab:"sauces"}}),t>d.sauces&&t>=d.mains&&n({type:Me,payload:{currentTab:"mains"}})}(e)},children:r?Object(se.jsx)(Ce,{}):[Object(se.jsx)(Se,{ingredients:u,handleModalOpen:b,header:"\u0411\u0443\u043b\u043a\u0438",ref:x},"\u0411\u0443\u043b\u043a\u0438"),Object(se.jsx)(Se,{ingredients:j,handleModalOpen:b,header:"\u0421\u043e\u0443\u0441\u044b",ref:h},"\u0421\u043e\u0443\u0441\u044b"),Object(se.jsx)(Se,{ingredients:p,handleModalOpen:b,header:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ref:O},"\u041d\u0430\u0447\u0438\u043d\u043a\u0438")]})},We=r(109),He=r.n(We),Je=function(){var e=_((function(e){return e.burgerIngredients})).currentTab;return Object(se.jsxs)("div",{className:He.a.block,children:[Object(se.jsx)(u.Tab,{value:"one",active:"buns"===e,onClick:function(){},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(se.jsx)(u.Tab,{value:"sauces",active:"sauces"===e,onClick:function(){},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(se.jsx)(u.Tab,{value:"mains",active:"mains"===e,onClick:function(){},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},Qe=r(218),Ze=r(44),Ke=r.n(Ze),Xe="constructorReducer/ADD_INGREDIENT",Ye="constructorReducer/DELETE_INGREDIENT",Ve="constructorReducer/REPLACE_ITEMS",$e="constructorReducer/CLEAR_CONSTRUCTOR",et=r.p+"static/media/order-icon.7341dd32.svg",tt="orderReducer/CALCULATE_ORDER_PRICE",rt="orderReducer/ORDER_DATA_REQUEST",nt="orderReducer/ORDER_DATA_SUCCESS",at="orderReducer/ORDER_DATA_ERROR",st="orderReducer/ORDER_DATA_RESET",ct="orderReducer/ORDERS_LIST_DATA_REQUEST",it="orderReducer/ORDERS_LIST_DATA_SUCCESS",ot="orderReducer/ORDERS_LIST_DATA_ERROR",dt=function(){var e=_((function(e){return e.burgerConstructor})),t=e.ingredients,r=e.bun,a=_((function(e){return e.burgerIngredients.ingredients})),s=m(),c=null!==r,i=Object(Qe.a)({accept:"ingredient",drop:function(e){u(e)},collect:function(e){return{isHover:e.isOver()}}}),o=Object(fe.a)(i,2),d=o[0].isHover,l=o[1],u=function(e){var t=a.find((function(t){return t._id===e._id}));t.hash=e._id+Math.floor(100*Math.random()),s({type:Xe,item:t}),s({type:Ue,id:e._id})};return Object(n.useEffect)((function(){s({type:tt,bun:r,ingredients:t})}),[s,t,r]),Object(se.jsxs)("section",{className:"".concat(Ke.a.section," pt-25 pl-4 pr-4"),children:[Object(se.jsxs)("div",{ref:l,className:"".concat(Ke.a.dropbox," ").concat(d&&Ke.a.dropHover," ").concat(!c&&Ke.a.placeholder),children:[!c&&Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0442\u0438\u043f \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0439 \u0431\u0443\u043b\u043a\u0438"}),c&&Object(se.jsx)(lt,{ingredients:t,bun:r})]}),c&&Object(se.jsx)(Ot,{ingredients:t,bun:r})]})},lt=(r(205),function(e){return Object(se.jsxs)("div",{className:"constructorElement__box",children:[Object(se.jsx)("div",{className:"constructorElement__item pl-8",children:Object(se.jsx)(u.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(e.bun.name," (\u0432\u0435\u0440\u0445)"),price:e.bun.price,thumbnail:e.bun.image_mobile})}),Object(se.jsx)("div",{className:"constructorElement__scrollable",children:e.ingredients.map((function(e,t){return Object(n.createElement)(gt,Object(x.a)(Object(x.a)({},e),{},{index:t,key:e.hash}))}))}),Object(se.jsx)("div",{className:"constructorElement__item pl-8",children:Object(se.jsx)(u.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(e.bun.name," (\u043d\u0438\u0437)"),price:e.bun.price,thumbnail:e.bun.image_mobile})})]})}),ut=r(79),pt=r.n(ut),_t=r(56),mt=r.n(_t),jt=r(110),bt=r.n(jt),ft=function(e){return Object(se.jsx)("div",{className:bt.a.overlay,onClick:function(t){t.stopPropagation(),e.onClose()},children:e.children})},xt=document.getElementById("modal"),ht=function(e){var t=_((function(e){return e.app})).modalType,r=m(),n=Object(i.g)(),s=function(e){27===e.keyCode&&o()};a.a.useEffect((function(){return document.addEventListener("keydown",s),function(){document.removeEventListener("keydown",s)}}));var o=function(){r({type:ze,payload:{isModalOpen:!1,modalType:null}}),"ingredient"===t&&r({type:Ae}),"order"===t&&r({type:st}),"order"===t&&r({type:$e}),"order"===t&&r({type:Pe}),"order"!==t&&n.go(-1)},d=e.children,l=e.header;return c.a.createPortal(Object(se.jsx)(ft,{onClose:o,children:Object(se.jsxs)("div",{className:"".concat(mt.a.modal," pt-10 pr-10 pl-10 pb-15"),onClick:function(e){e.stopPropagation()},children:[Object(se.jsxs)("div",{className:mt.a.header,children:[l&&Object(se.jsx)("p",{className:"text text_type_main-large",children:l}),Object(se.jsx)("span",{className:mt.a.modalCloseBtn,children:Object(se.jsx)(u.CloseIcon,{type:"primary",onClick:o})})]}),d]})}),xt)},Ot=function(e){var t=e.ingredients,r=e.bun,n=m(),a=Object(i.g)(),s=_((function(e){return e.order})).price,c=_((function(e){return e.app})),o=c.isModalOpen,d=c.modalType,l=_((function(e){return e.auth})).isAuthorised;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("div",{className:"".concat(pt.a.priceBox," pt-10 pb-10"),children:[Object(se.jsx)("span",{className:"text text_type_digits-medium pr-3",children:s}),Object(se.jsx)("span",{className:"".concat(pt.a.priceIcon," pr-10"),children:Object(se.jsx)(u.CurrencyIcon,{type:"primary"})}),Object(se.jsx)(u.Button,{type:"primary",size:"medium",onClick:function(){if(l){var e=[];r&&e.push(r._id,r._id),t.forEach((function(t){e.push(t._id)})),n((s=e,function(){var e=Object(f.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:rt,payload:{orderDataRequest:!0}}),O("token")){e.next=7;break}return e.next=5,D();case 5:(r=e.sent)&&r.success?((n=r.accessToken.split("Bearer ")[1])&&h("token",n,{expires:1200}),localStorage.setItem("refreshToken",r.refreshToken)):console.log("update token error");case 7:return e.next=9,R(s);case 9:(a=e.sent)&&a.success?t({type:nt,payload:{orderData:{orderID:a.order.number,statusIcon:et,orderStatus:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c",orderDescription:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"},orderDataRequest:!1,orderDataSuccess:!0}}):t({type:at,payload:{orderData:{orderID:null,statusIcon:null,orderStatus:null,orderDescription:null},orderDataRequest:!1,orderDataSuccess:!1,error:a.error}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())),n({type:Ge,payload:{isModalOpen:!0,modalType:"order"}})}else a.push("/login");var s},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),o&&"order"===d&&Object(se.jsx)(ht,{children:Object(se.jsx)(Nt,{})})]})},gt=(r(206),function(e){var t=e._id,r=e.name,n=e.price,s=e.image_mobile,c=e.index,i=e.hash,o=m(),d=a.a.useRef(null),l=Object(ve.a)({type:"replaceObj",item:{_id:t,index:c},collect:function(e){return{isDrag:e.isDragging()}}}),p=Object(fe.a)(l,2),_=p[0].isDrag,j=p[1],b=Object(Qe.a)({accept:"replaceObj",hover:function(e,t){var r;if(d.current){var n=e.index,a=c;if(n!==a){var s=null===(r=d.current)||void 0===r?void 0:r.getBoundingClientRect(),i=(s.bottom-s.top)/2,o=t.getClientOffset().y-s.top;n<a&&o<i||n>a&&o>i||(O(n,a),e.index=a)}}},collect:function(e){return{isHover:e.isOver()}}}),f=Object(fe.a)(b,2),x=f[0].isHover,h=f[1],O=function(e,t){o({type:Ve,payload:{dragIndex:e,hoverIndex:t}})};return j(h(d)),Object(se.jsxs)("div",{className:"".concat(_&&"draggable"," ").concat(!_&&x&&"hover"," constructorElement__item"),ref:d,children:[Object(se.jsx)("button",{className:"element__dragicon",children:Object(se.jsx)(u.DragIcon,{type:"primary"})}),Object(se.jsx)(u.ConstructorElement,{text:r,price:n,thumbnail:s,handleClose:function(){o({type:Ye,hash:i}),o({type:qe,id:t})}})]})}),vt=r(80),yt=r.n(vt),Nt=function(){var e=_((function(e){return e.order})),t=e.orderData;return e.orderDataRequest?Object(se.jsx)(Ce,{}):Object(se.jsxs)("div",{className:yt.a.modalFlex,children:[Object(se.jsx)("p",{className:"text text_type_digits-large pt-8 pb-8",children:t.orderID}),Object(se.jsx)("p",{className:"text text_type_main-medium pb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(se.jsx)("img",{src:t.statusIcon,alt:"Order Icon",className:"pb-15"}),Object(se.jsx)("p",{className:"text text_type_main-default",children:t.orderStatus}),Object(se.jsx)("p",{className:"".concat(yt.a.secondaryColor," text text_type_main-default pb-15"),children:t.orderDescription})]})},Rt=function(){return Object(se.jsx)("main",{className:"".concat(le.a.BurgerMain," container pl-5 pr-5"),children:Object(se.jsxs)(ie.a,{backend:oe.a,children:[Object(se.jsx)(_e,{}),Object(se.jsx)(dt,{})]})})},St=r(15),Tt=(r(49),function(){var e,t=_((function(e){return e.auth})),r=t.isAuthorised,a=t.logoutRequest,s=t.loginSuccess,c=m(),d=Object(i.g)(),l=null===d||void 0===d||null===(e=d.location)||void 0===e?void 0:e.state,p=Object(n.useState)({email:"",password:""}),j=Object(fe.a)(p,2),O=j[0],g=j[1],v=function(e){g(Object(x.a)(Object(x.a)({},O),{},Object(St.a)({},e.target.name,e.target.value)))};return s&&"REPLACE"===d.action?Object(se.jsx)(i.a,{to:l.from.pathname||"/"}):r&&!a?Object(se.jsx)(i.a,{to:"/"}):Object(se.jsx)("main",{className:"form container",children:Object(se.jsxs)("form",{className:"form__box",onSubmit:function(e){var t;e.preventDefault(),c((t=O,function(){var e=Object(f.a)(b.a.mark((function e(r){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:P,payload:{loginRequest:!0}}),e.next=4,I(t);case 4:(n=e.sent)&&n.success?(r({type:B,payload:{isAuthorised:!0,userInfo:n.user,loginRequest:!1,loginSuccess:!0}}),(a=n.accessToken.split("Bearer ")[1])&&h("token",a,{expires:1200}),localStorage.setItem("refreshToken",n.refreshToken)):r({type:G,payload:{loginRequest:!1,loginSuccess:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(se.jsx)("p",{className:"text text_type_main-medium pb-6 form__header",children:"\u0412\u0445\u043e\u0434"}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"email",placeholder:"E-mail",icon:void 0,value:O.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return v(e)}})}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.PasswordInput,{value:O.password,name:"password",onChange:function(e){return v(e)}})}),!1===s&&Object(se.jsx)("span",{className:"text text_type_main-default form__errorMessage mt-2 mb-6",children:"\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"}),Object(se.jsx)("div",{className:"form__button",children:Object(se.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(se.jsxs)("span",{className:"form__footerField pt-20 pb-6",children:[Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(se.jsx)(o.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(se.jsxs)("span",{className:"form__footerField",children:[Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(se.jsx)(o.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})}),It=function(){var e=_((function(e){return e.auth})),t=e.isAuthorised,r=e.registrationSuccess,a=m(),s=Object(n.useState)({name:"",email:"",password:""}),c=Object(fe.a)(s,2),d=c[0],l=c[1],p=function(e){l(Object(x.a)(Object(x.a)({},d),{},Object(St.a)({},e.target.name,e.target.value)))};return t?Object(se.jsx)(i.a,{to:"/"}):Object(se.jsx)("main",{className:"form container",children:Object(se.jsxs)("form",{className:"form__box",onSubmit:function(e){var t;e.preventDefault(),a((t=d,function(){var e=Object(f.a)(b.a.mark((function e(r){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:M,payload:{registrationRequest:!0}}),e.next=4,C(t);case 4:(n=e.sent)&&n.success?(r({type:U,payload:{isAuthorised:!0,userInfo:n.user,registrationRequest:!1,registrationSuccess:!0}}),(a=n.accessToken.split("Bearer ")[1])&&h("token",a,{expires:1200}),localStorage.setItem("refreshToken",n.refreshToken)):r({type:q,payload:{registrationRequest:!1,registrationSuccess:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(se.jsx)("p",{className:"text text_type_main-medium pb-6 form__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",icon:void 0,value:d.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"email",placeholder:"E-mail",icon:void 0,value:d.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.PasswordInput,{value:d.password,name:"password",onChange:function(e){return p(e)}})}),!1===r&&Object(se.jsx)("span",{className:"text text_type_main-default form__errorMessage mt-2 mb-6",children:"\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"}),Object(se.jsx)("div",{className:"form__button",children:Object(se.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(se.jsxs)("span",{className:"form__footerField pt-20",children:[Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(se.jsx)(o.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Et=function(){var e=_((function(e){return e.auth})),t=e.forgotPasswordSuccess,r=e.isAuthorised,a=m(),s=Object(n.useState)({email:""}),c=Object(fe.a)(s,2),d=c[0],l=c[1];return t?Object(se.jsx)(i.a,{to:"/reset-password"}):r?Object(se.jsx)(i.a,{to:"/"}):Object(se.jsx)("main",{className:"form container",children:Object(se.jsxs)("form",{className:"form__box",onSubmit:function(e){var t;e.preventDefault(),a((t=d,function(){var e=Object(f.a)(b.a.mark((function e(r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:z,payload:{forgotPasswordRequest:!0}}),e.next=4,k(t);case 4:(n=e.sent)&&n.success?r({type:F,payload:{forgotPasswordSuccess:!0,forgotPasswordRequest:!1,isResetPaswordRequested:!0}}):r({type:W,payload:{forgotPasswordRequest:!1,forgotPasswordSuccess:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(se.jsx)("p",{className:"text text_type_main-medium pb-6 form__header",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",icon:void 0,value:d.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return function(e){l(Object(x.a)(Object(x.a)({},d),{},Object(St.a)({},e.target.name,e.target.value)))}(e)}})}),!1===t&&Object(se.jsx)("span",{className:"text text_type_main-default form__errorMessage mt-2 mb-6",children:"\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"}),Object(se.jsx)("div",{className:"form__button",children:Object(se.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(se.jsxs)("span",{className:"form__footerField pt-20",children:[Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(se.jsx)(o.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ct=function(){var e=_((function(e){return e.auth})),t=e.isResetPaswordRequested,r=e.resetPasswordSuccess,a=m(),s=Object(n.useState)({password:"",token:""}),c=Object(fe.a)(s,2),d=c[0],l=c[1],p=function(e){l(Object(x.a)(Object(x.a)({},d),{},Object(St.a)({},e.target.name,e.target.value)))};return t?Object(se.jsx)("main",{className:"form container",children:Object(se.jsxs)("form",{className:"form__box",onSubmit:function(e){var t;e.preventDefault(),a((t=d,function(){var e=Object(f.a)(b.a.mark((function e(r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:H,payload:{resetPasswordRequest:!0}}),e.next=4,w(t);case 4:(n=e.sent)&&n.success?r({type:J,payload:{resetPasswordRequest:!1,resetPasswordSuccess:!0,isResetPaswordRequested:!1}}):r({type:Q,payload:{resetPasswordRequest:!1,resetPasswordSuccess:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(se.jsx)("p",{className:"text text_type_main-medium pb-6 form__header",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",icon:"ShowIcon",value:d.password,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),Object(se.jsx)("div",{className:"form__input mb-6",children:Object(se.jsx)(u.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",icon:void 0,value:d.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),!1===r&&Object(se.jsx)("span",{className:"text text_type_main-default form__errorMessage mt-2 mb-6",children:"\u0423\u043f\u0441, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"}),Object(se.jsx)("div",{className:"form__button",children:Object(se.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(se.jsxs)("span",{className:"form__footerField pt-20",children:[Object(se.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(se.jsx)(o.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}):Object(se.jsx)(i.a,{to:"/"})},kt=r(23),wt=r.n(kt),Dt=(r(207),function(){var e=_((function(e){return e.auth})).userInfo,t=m();Object(n.useEffect)((function(){e.email||t(function(){var e=Object(f.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:X,payload:{getUserDataRequest:!0}}),O("token")){e.next=7;break}return e.next=5,D();case 5:(r=e.sent)&&r.success?((n=r.accessToken.split("Bearer ")[1])&&h("token",n,{expires:1200}),localStorage.setItem("refreshToken",r.refreshToken)):console.log("update token error");case 7:return e.next=9,L();case 9:(a=e.sent)&&a.success?t({type:Y,payload:{getUserDataRequest:!1,getUserDataSuccess:!0,userInfo:a.user}}):t({type:V,payload:{getUserDataRequest:!1,getUserDataSuccess:!1}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),c(e)}),[t,e]);var r=Object(n.useState)(e),a=Object(fe.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(fe.a)(i,2),d=o[0],l=o[1],p=function(e){c(Object(x.a)(Object(x.a)({},s),{},Object(St.a)({},e.target.name,e.target.value))),l(!0)};return Object(se.jsxs)("form",{className:"profile__box",onSubmit:function(e){var r;e.preventDefault(),t((r=s,function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:$,payload:{updateUserDataRequest:!0}}),O("token")){e.next=7;break}return e.next=5,D();case 5:(n=e.sent)&&n.success?((a=n.accessToken.split("Bearer ")[1])&&h("token",a,{expires:1200}),localStorage.setItem("refreshToken",n.refreshToken)):console.log("update token error");case 7:return e.next=9,A(r);case 9:(s=e.sent)&&s.success?t({type:ee,payload:{updateUserDataRequest:!1,updateUserDataSuccess:!0,userInfo:s.user}}):t({type:te,payload:{updateUserDataRequest:!1,updateUserDataSuccess:!1}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(se.jsx)("div",{className:"profile__input mb-6",children:Object(se.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",icon:"EditIcon",value:s.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),Object(se.jsx)("div",{className:"profile__input mb-6",children:Object(se.jsx)(u.Input,{type:"email",placeholder:"E-mail",icon:"EditIcon",value:s.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),Object(se.jsx)("div",{className:"profile__input",children:Object(se.jsx)(u.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon",value:s.password?s.password:"",name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",onChange:function(e){return p(e)}})}),d&&Object(se.jsxs)("div",{className:"profile__buttons pt-5",children:[Object(se.jsx)(u.Button,{type:"primary",size:"small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(se.jsx)(u.Button,{type:"secondary",size:"medium",onClick:function(t){t.preventDefault(),c(e)},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})]})}),Lt=r(111),At=r.n(Lt),Mt="wsReducer/WS_CONNECTION_START",Ut="wsReducer/WS_CONNECTION_STOP",qt="wsReducer/WS_CONNECTION_SUCCESS",Pt="wsReducer/WS_CONNECTION_ERROR",Bt="wsReducer/WS_CONNECTION_CLOSED",Gt="wsReducer/WS_GET_MESSAGE",zt=function(){var e=_((function(e){return e.webSocket})).data,t=_((function(e){return e.burgerIngredients})).ingredients,r=m();Object(n.useEffect)((function(){return r({type:Mt,payload:{url:"wss://norma.nomoreparties.space/orders",isToken:!0}}),function(){r({type:Ut})}}),[r]);var a=[];return e.orders&&e.orders.forEach((function(e,r){if(e.ingredients&&e.ingredients.length>0&&e._id){var n={id:e._id,number:e.number,date:e.createdAt,name:e.name,status:e.status,ingredientsImages:[],price:null};e.ingredients.forEach((function(e){var r=t.find((function(t){return t._id===e}));r&&(n.ingredientsImages.push({name:r.name,image:r.image_mobile}),n.price+=r.price)})),a.push(Object(se.jsx)(Qt,{data:n},r))}})),e.success&&e.orders?Object(se.jsx)("div",{className:"".concat(At.a.orders," pr-2"),children:a.reverse()}):Object(se.jsx)(Ce,{})},Ft=r(34),Wt=r.n(Ft),Ht=(r(74),r(75),r(24)),Jt=r.n(Ht),Qt=function(e){var t=e.data,r=m(),n=[];t.ingredientsImages.forEach((function(e,r){t.ingredientsImages.length>5?(r<5&&n.push(Object(se.jsx)("div",{className:Jt.a.ordersItem__ingredient,style:{zIndex:10-r},children:Object(se.jsx)("img",{src:e.image,alt:e.name})},r)),5===r&&n.push(Object(se.jsxs)("div",{className:Jt.a.ordersItem__ingredient,style:{zIndex:10-r},children:[Object(se.jsx)("img",{src:e.image,alt:e.name}),Object(se.jsx)("div",{className:Jt.a.ordersItem__counter,children:Object(se.jsxs)("p",{className:"text text_type_main-default",children:["+",t.ingredientsImages.length-5]})})]},r))):n.push(Object(se.jsx)("div",{className:Jt.a.ordersItem__ingredient,style:{zIndex:10-r},children:Object(se.jsx)("img",{src:e.image,alt:e.name})},r))}));return Object(se.jsxs)(o.b,{to:"/profile/orders/".concat(t.id),className:"".concat(Jt.a.ordersItem," pt-6 pl-6 pr-6 pb-6"),onClick:function(){r({type:Ge,payload:{isModalOpen:!0,modalType:"profileOrder"}})},children:[Object(se.jsxs)("div",{className:"".concat(Jt.a.ordersItem__header," pb-6"),children:[Object(se.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(se.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Object(se.jsx)(Wt.a,{date:t.date,locale:"ru",calendar:{lastDay:"[\u0412\u0447\u0435\u0440\u0430, ] LT [GMT]Z",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ] LT [GMT]Z",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, ] LT [GMT]Z",lastWeek:"D MMM [\u0432] LT",nextWeek:"D MMM [\u0432] LT",sameElse:"L"}})})]}),Object(se.jsx)("p",{className:"text text_type_main-medium pb-2",children:t.name}),Object(se.jsxs)("p",{className:"".concat("done"===t.status&&Jt.a.order__success," text text_type_main-default mb-6"),children:["created"===t.status&&"\u0421\u043e\u0437\u0434\u0430\u043d","pending"===t.status&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f","done"===t.status&&"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"]}),Object(se.jsxs)("div",{className:Jt.a.ordersItem__footer,children:[Object(se.jsx)("div",{className:Jt.a.ordersItem__ingredients,children:n}),Object(se.jsxs)("div",{className:"".concat(Jt.a.ordersItem__price," ml-6"),children:[Object(se.jsx)("p",{className:"text text_type_digits-default pr-2",children:t.price}),Object(se.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},Zt=function(){var e=m(),t=Object(i.h)();return Object(se.jsxs)("main",{className:"".concat(wt.a.profile," container pl-5 pr-5"),children:[Object(se.jsxs)("section",{className:wt.a.profile__nav,children:[Object(se.jsx)(o.c,{to:"/profile",className:wt.a.navLink,activeClassName:"/profile"!==t.pathname?void 0:wt.a.active,children:Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(se.jsx)(o.c,{to:"/profile/orders",className:wt.a.navLink,activeClassName:wt.a.active,children:Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(se.jsx)(o.c,{to:"/login",className:wt.a.navLink,activeClassName:"active",onClick:function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:re,payload:{logoutRequest:!0}}),e.next=4,E();case 4:(r=e.sent)&&r.success?(localStorage.removeItem("refreshToken"),t({type:ne,payload:{isAuthorised:!1,logoutRequest:!1,logoutSuccess:!0}})):t({type:ae,payload:{logoutRequest:!1,logoutSuccess:!1}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},children:Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(se.jsx)(i.b,{exact:!0,path:"/profile",children:Object(se.jsx)("p",{className:"".concat(wt.a.gray," text text_type_main-default mt-20"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})}),Object(se.jsx)(i.b,{exact:!0,path:"/profile/orders",children:Object(se.jsx)("p",{className:"".concat(wt.a.gray," text text_type_main-default mt-20"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}),Object(se.jsxs)("section",{className:"".concat(wt.a.profile__body," ml-15"),children:[Object(se.jsx)(i.b,{exact:!0,path:"/profile",children:Object(se.jsx)(Dt,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/profile/orders",children:Object(se.jsx)(zt,{})})]})]})},Kt=r(112),Xt=r.n(Kt),Yt=r.p+"static/media/warning-exclamation-mark-light-blue.7db674b2.svg",Vt=function(){return Object(se.jsxs)("main",{className:"".concat(Xt.a.page," container"),children:[Object(se.jsx)("img",{src:Yt,alt:"page not found"}),Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u0414\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})},$t=r(35),er=r.n($t),tr=function(){var e=_((function(e){return e.burgerIngredients})),t=e.ingredients,r=e.ingredientsRequest,a=e.ingredientsSuccess,s=m(),c=Object(i.i)().id,o=Object(n.useState)(!1),d=Object(fe.a)(o,2),l=d[0],u=d[1],p=Object(n.useState)(!1),j=Object(fe.a)(p,2),b=j[0],f=j[1];return Object(n.useEffect)((function(){0===t.length&&u(!0)}),[]),Object(n.useEffect)((function(){if(t.length>0&&!r&&!1!==a){var e=t.find((function(e){return e._id===c}));e||f(!0),s({type:Le,payload:{modalData:e}}),u(!1)}return function(){s({type:Ae})}}),[t.length]),!1===a?Object(se.jsx)("main",{className:er.a.ingredient,children:Object(se.jsxs)("div",{className:er.a.ingredient__wrongID,children:[Object(se.jsx)("img",{src:Yt,alt:"Ingredient ID is wrong"}),Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430!"})]})}):l?Object(se.jsx)(Ce,{}):b?Object(se.jsx)("main",{className:er.a.ingredient,children:Object(se.jsxs)("div",{className:er.a.ingredient__wrongID,children:[Object(se.jsx)("img",{src:Yt,alt:"Ingredient ID is wrong"}),Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 ID \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430!"})]})}):Object(se.jsxs)("main",{className:er.a.ingredient,children:[Object(se.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(se.jsx)(be,{})]})},rr=r(82),nr=r.n(rr),ar=r(113),sr=r.n(ar),cr=function(e){var t=e.orders,r=_((function(e){return e.burgerIngredients})).ingredients,n=[];return t.forEach((function(e,t){if(e.ingredients&&e.ingredients.length>0&&e._id){var a={id:e._id,number:e.number,date:e.createdAt,name:e.name,ingredientsImages:[],price:null};e.ingredients.forEach((function(e){var t=r.find((function(t){return t._id===e}));t&&(a.ingredientsImages.push({name:t.name,image:t.image_mobile}),a.price+=t.price)})),n.push(Object(se.jsx)(pr,{data:a},t))}})),Object(se.jsx)("section",{className:"".concat(sr.a.feedColumn," pr-2"),children:n})},ir=r(11),or=r.n(ir),dr=function(e){var t=e.orders,r=e.total,n=e.totalToday,a={col1:[],col2:[]},s={col1:[],col2:[]};if(t.length>0){var c=[],i=[];if(t.forEach((function(e){"done"===e.status?c.push(e):i.push(e)})),c.length>10){var o=[],d=[];c.forEach((function(e,t){t<10&&o.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," ").concat(or.a.ready," text text_type_digits-default pt-2"),children:e.number},t)),t>=10&&t<20&&d.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," ").concat(or.a.ready," text text_type_digits-default pt-2"),children:e.number},t))})),a={col1:o,col2:d}}else c.forEach((function(e,t){a.col1.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," ").concat(or.a.ready," text text_type_digits-default pt-2"),children:e.number},t))}));if(i.length>10){var l=[],u=[];i.forEach((function(e,t){t<10&&l.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," text text_type_digits-default pt-2"),children:e.number},t)),t>=10&&t<20&&u.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," text text_type_digits-default pt-2"),children:e.number},t))})),s={col1:l,col2:u}}else i.forEach((function(e,t){s.col1.push(Object(se.jsx)("p",{className:"".concat(or.a.ordersList__item," text text_type_digits-default pt-2"),children:e.number},t))}))}return Object(se.jsxs)("section",{className:or.a.feedColumn,children:[Object(se.jsxs)("div",{className:"".concat(or.a.ordersList," mb-15"),children:[Object(se.jsxs)("div",{className:or.a.ordersList__ready,children:[Object(se.jsx)("p",{className:"".concat(or.a.ordersList__header," text text_type_main-medium pb-4"),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(se.jsx)("div",{className:or.a.ordersList__col1,children:a.col1}),Object(se.jsx)("div",{className:or.a.ordersList__col2,children:a.col2})]}),Object(se.jsxs)("div",{className:or.a.ordersList__inProgress,children:[Object(se.jsx)("p",{className:"".concat(or.a.ordersList__header," text text_type_main-medium pb-4"),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(se.jsx)("div",{className:or.a.ordersList__col1,children:s.col1}),Object(se.jsx)("div",{className:or.a.ordersList__col2,children:s.col2})]})]}),Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(se.jsx)("p",{className:"".concat(or.a.ordersCounter," text text_type_digits-large mb-15"),children:r}),Object(se.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(se.jsx)("p",{className:"".concat(or.a.ordersCounter," text text_type_digits-large"),children:n})]})},lr=r(27),ur=r.n(lr),pr=function(e){var t=e.data,r=m(),n=[];t.ingredientsImages.forEach((function(e,r){t.ingredientsImages.length>5?(r<5&&n.push(Object(se.jsx)("div",{className:ur.a.element__ingredient,style:{zIndex:10-r},children:Object(se.jsx)("img",{src:e.image,alt:e.name})},r)),5===r&&n.push(Object(se.jsxs)("div",{className:ur.a.element__ingredient,style:{zIndex:10-r},children:[Object(se.jsx)("img",{src:e.image,alt:e.name}),Object(se.jsx)("div",{className:ur.a.element__counter,children:Object(se.jsxs)("p",{className:"text text_type_main-default",children:["+",t.ingredientsImages.length-5]})})]},r))):n.push(Object(se.jsx)("div",{className:ur.a.element__ingredient,style:{zIndex:10-r},children:Object(se.jsx)("img",{src:e.image,alt:e.name})},r))}));return Object(se.jsxs)(o.b,{to:"/feed/".concat(t.id),className:"".concat(ur.a.element," mb-4 pl-6 pr-6 pb-6 pt-6"),onClick:function(){r({type:Ge,payload:{isModalOpen:!0,modalType:"feedOrder"}})},children:[Object(se.jsxs)("div",{className:"".concat(ur.a.element__header," pb-6"),children:[Object(se.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(se.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Object(se.jsx)(Wt.a,{date:t.date,locale:"ru",calendar:{lastDay:"[\u0412\u0447\u0435\u0440\u0430, ] LT [GMT]Z",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ] LT [GMT]Z",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, ] LT [GMT]Z",lastWeek:"D MMM [\u0432] LT",nextWeek:"dddd [\u0432] LT",sameElse:"L"}})})]}),Object(se.jsx)("p",{className:"text text_type_main-medium pb-6",children:t.name}),Object(se.jsxs)("div",{className:ur.a.element__footer,children:[Object(se.jsx)("div",{className:ur.a.element__ingredients,children:n}),Object(se.jsxs)("div",{className:"".concat(ur.a.element__price," ml-6"),children:[Object(se.jsx)("p",{className:"text text_type_digits-default pr-2",children:t.price}),Object(se.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},_r=function(){var e=_((function(e){return e.webSocket})).data,t=m();return Object(n.useEffect)((function(){return t({type:Mt,payload:{url:"wss://norma.nomoreparties.space/orders/all"}}),function(){t({type:Ut})}}),[t]),e.success&&e.orders.length>0?Object(se.jsxs)("main",{className:"".concat(nr.a.feed," container pl-5 pr-5 pt-10"),children:[Object(se.jsx)("p",{className:"".concat(nr.a.feed__heading," text text_type_main-large pb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(se.jsx)(cr,{orders:e.orders}),Object(se.jsx)(dr,{orders:e.orders,total:e.total,totalToday:e.totalToday})]}):Object(se.jsx)(Ce,{})},mr=r(114),jr=r.n(mr),br=r(25),fr=r.n(br),xr=function(){var e=_((function(e){return e.burgerIngredients})),t=e.ingredients,r=e.ingredientsSuccess,a=_((function(e){return e.order})),s=a.ordersList,c=a.ordersListRequest,o=a.ordersListSuccess,d=Object(i.h)(),l=Object(i.i)().id,p=m(),j=Object(n.useState)(!1),g=Object(fe.a)(j,2),v=g[0],y=g[1],N=Object(n.useState)(!0),R=Object(fe.a)(N,2),I=R[0],E=R[1],C=0,k=null,w=[];if(Object(n.useEffect)((function(){-1!==d.pathname.indexOf("/profile/orders")?p(function(){var e=Object(f.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:ct,payload:{ordersListRequest:!0,ordersListSuccess:null}}),O("token")){e.next=7;break}return e.next=5,D();case 5:(r=e.sent)&&r.success?((n=r.accessToken.split("Bearer ")[1])&&h("token",n,{expires:1200}),localStorage.setItem("refreshToken",r.refreshToken)):console.log("update token error");case 7:return e.next=9,S();case 9:(a=e.sent)&&a.success?t({type:it,payload:{ordersList:a.orders,ordersListRequest:!1,ordersListSuccess:!0}}):t({type:ot,payload:{ordersListRequest:!1,ordersListSuccess:!1,error:a.error}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()):p(function(){var e=Object(f.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:ct,payload:{ordersListRequest:!0,ordersListSuccess:null}}),O("token")){e.next=7;break}return e.next=5,D();case 5:(r=e.sent)&&r.success?((n=r.accessToken.split("Bearer ")[1])&&h("token",n,{expires:1200}),localStorage.setItem("refreshToken",r.refreshToken)):console.log("update token error");case 7:return e.next=9,T();case 9:(a=e.sent)&&a.success?t({type:it,payload:{ordersList:a.orders,ordersListRequest:!1,ordersListSuccess:!0}}):t({type:ot,payload:{ordersListRequest:!1,ordersListSuccess:!1,error:a.error}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),E(!1)}),[]),o&&!c&&!I&&r)if(k=s.find((function(e){return e._id===l}))){var L=k.ingredients.reduce((function(e,t){return"undefined"!==typeof e[t]?Object(x.a)(Object(x.a)({},e),{},Object(St.a)({},t,e[t]+1)):Object(x.a)(Object(x.a)({},e),{},Object(St.a)({},t,1))}),{});for(var A in L){var M=t.find((function(e){return e._id===A}));C+=L[A]*M.price,w.push(Object(se.jsxs)("div",{className:"".concat(fr.a.ingredient," mt-4"),children:[Object(se.jsx)("div",{className:fr.a.ingredient_img,children:Object(se.jsx)("img",{src:M.image_mobile,alt:M.name})}),Object(se.jsx)("p",{className:"".concat(fr.a.ingredient__title," text text_type_main-default pl-4"),children:M.name}),Object(se.jsxs)("span",{className:fr.a.ingredient__price,children:[Object(se.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[" ",L[A]," x ",M.price]}),Object(se.jsx)(u.CurrencyIcon,{type:"primary"})]})]},A))}}else y(!0);return o&&r&&!v&&k?Object(se.jsxs)("div",{className:fr.a.order__box,children:[Object(se.jsxs)("p",{className:"".concat(fr.a.order__number," text text_type_digits-default mb-10"),children:["#",k.number]}),Object(se.jsx)("p",{className:"text text_type_main-medium pb-3",children:k.name}),Object(se.jsxs)("p",{className:"".concat("done"===k.status&&fr.a.order__success," text text_type_main-default mb-15"),children:["created"===k.status&&"\u0421\u043e\u0437\u0434\u0430\u043d","pending"===k.status&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f","done"===k.status&&"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"]}),Object(se.jsx)("p",{className:"text text_type_main-medium pb-2",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(se.jsx)("div",{className:"".concat(fr.a.order__ingredientsBox," pr-6"),children:w}),Object(se.jsxs)("div",{className:"".concat(fr.a.order__footer," mt-10"),children:[Object(se.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Object(se.jsx)(Wt.a,{date:k.createdAt,locale:"ru",calendar:{lastDay:"[\u0412\u0447\u0435\u0440\u0430, ] LT [GMT]Z",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ] LT [GMT]Z",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, ] LT [GMT]Z",lastWeek:"D MMM [\u0432] LT",nextWeek:"D MMM [\u0432] LT",sameElse:"L"}})}),Object(se.jsxs)("span",{className:fr.a.order__price,children:[Object(se.jsx)("p",{className:"text text_type_digits-default pr-2",children:C}),Object(se.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]}):Object(se.jsx)(Ce,{})},hr=function(){return Object(se.jsx)("main",{className:"".concat(jr.a.order," container"),children:Object(se.jsx)(xr,{})})},Or=r(31),gr=r(115),vr={isFetching:!1,isModalOpen:!1,modalType:null},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:case Ge:case ze:return Object(x.a)(Object(x.a)({},e),t.payload);default:return e}},Nr={ingredients:[],ingredientsRequest:!1,ingredientsSuccess:null,modalData:null,error:null,currentTab:"buns"},Rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:case we:case De:case Le:case Me:return Object(x.a)(Object(x.a)({},e),t.payload);case Ae:return Object(x.a)(Object(x.a)({},e),{},{modalData:Nr.modalData});case Ue:var r=e.ingredients.find((function(e){return e._id===t.id})),n=e.ingredients.map((function(e){return e._id===r._id&&"bun"===e.type?Object(x.a)(Object(x.a)({},e),{},{__v:2}):e._id!==r._id&&"bun"===e.type&&"bun"===r.type?Object(x.a)(Object(x.a)({},e),{},{__v:0}):e._id===r._id&&"bun"!==e.type?Object(x.a)(Object(x.a)({},e),{},{__v:++e.__v}):e}));return Object(x.a)(Object(x.a)({},e),{},{ingredients:n});case qe:var a=e.ingredients.map((function(e){return e._id===t.id&&"bun"!==e.type?Object(x.a)(Object(x.a)({},e),{},{__v:--e.__v}):e}));return Object(x.a)(Object(x.a)({},e),{},{ingredients:a});case Pe:var s=e.ingredients.map((function(e){return e.__v>0?Object(x.a)(Object(x.a)({},e),{},{__v:0}):e}));return Object(x.a)(Object(x.a)({},e),{},{ingredients:s});default:return e}},Sr=r(83),Tr={bun:null,ingredients:[]},Ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return"bun"===t.item.type?Object(x.a)(Object(x.a)({},e),{},{bun:t.item}):Object(x.a)(Object(x.a)({},e),{},{ingredients:[].concat(Object(Sr.a)(e.ingredients),[t.item])});case Ye:return Object(x.a)(Object(x.a)({},e),{},{ingredients:e.ingredients.filter((function(e){return e.hash!==t.hash}))});case Ve:var r=e.ingredients.find((function(e,r){return r===t.payload.dragIndex})),n=Object(Sr.a)(e.ingredients);return n.splice(t.payload.dragIndex,1),n.splice(t.payload.hoverIndex,0,r),Object(x.a)(Object(x.a)({},e),{},{ingredients:n});case $e:return Object(x.a)({},Tr);default:return e}},Er={price:0,orderData:{orderID:null,statusIcon:null,orderStatus:null,orderDescription:null},orderDataRequest:!1,orderDataSuccess:null,ordersList:[],ordersListRequest:!1,ordersListSuccess:null,error:null},Cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:case nt:case at:case ct:case it:case ot:return Object(x.a)(Object(x.a)({},e),t.payload);case tt:var r=t.bun?2*t.bun.price:0;return t.ingredients.forEach((function(e){r+=e.price})),Object(x.a)(Object(x.a)({},e),{},{price:r});case st:return Object(x.a)(Object(x.a)({},e),{},{orderData:Er.orderData});default:return e}},kr={isAuthorised:null,userInfo:{email:"",name:""},registrationRequest:!1,registrationSuccess:null,loginRequest:!1,loginSuccess:null,isResetPaswordRequested:!1,forgotPasswordRequest:!1,forgotPasswordSuccess:null,resetPasswordRequest:!1,resetPasswordSuccess:null,getUserDataRequest:!1,getUserDataSuccess:null,updateUserDataRequest:!1,updateUserDataSuccess:null,logoutRequest:!1,logoutSuccess:null},wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:case U:case q:case P:case B:case G:case z:case F:case W:case H:case J:case Q:case Z:case K:case X:case Y:case V:case $:case ee:case te:case re:case ne:case ae:return Object(x.a)(Object(x.a)({},e),t.payload);default:return e}},Dr={wsConnected:!1,data:{success:null,orders:[],totalToday:null,total:null},error:""},Lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Object(x.a)(Object(x.a)({},e),{},{error:null,wsConnected:!0});case Pt:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload,wsConnected:!1});case Bt:return Object(x.a)({},Dr);case Gt:return Object(x.a)(Object(x.a)({},e),{},{error:null,data:t.payload});default:return e}},Ar=Object(Or.b)({app:yr,auth:wr,burgerIngredients:Rr,burgerConstructor:Ir,order:Cr,webSocket:Lr}),Mr={wsInit:Mt,wsStop:Ut,wsSendMessage:"wsReducer/WS_SEND_MESSAGE",onOpen:qt,onClose:Bt,onError:Pt,onMessage:Gt},Ur=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Or.c)(Object(Or.a)(gr.a,(g=Mr,function(e){var t=null;return function(r){return function(n){var a=e.dispatch,s=(e.getState,n.type),c=n.payload,i=g.wsInit,o=g.wsStop,d=g.wsSendMessage,l=g.onOpen,u=g.onClose,p=g.onError,_=g.onMessage;if(s===i){var m=c.isToken,j=O("token"),b=m?c.url+"?token=".concat(j):c.url;t=new WebSocket(b)}if(t){if(t.onopen=function(e){a({type:l,payload:e})},t.onerror=function(e){a({type:p,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t);a({type:_,payload:r})},t.onclose=function(e){a({type:u,payload:e})},s===d){var f=c;t.send(JSON.stringify(f))}s===o&&t.close(1e3,"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a.")}r(n)}}}))),qr=Object(Or.d)(Ar,Ur),Pr=r(117),Br=["children"],Gr=function(e){var t=e.children,r=Object(Pr.a)(e,Br),n=_((function(e){return e.auth})).isAuthorised;return Object(se.jsx)(i.b,Object(x.a)(Object(x.a)({},r),{},{render:function(e){var r=e.location;return!1!==n?t:Object(se.jsx)(i.a,{to:{pathname:"/login",state:{from:r}}})}}))},zr=function(e){var t=e.ComponentPage,r=e.ComponentModal,n=e.modalName,a=e.modalHeader,s=_((function(e){return e.app})),c=s.isModalOpen,i=s.modalType;return c&&i===n?Object(se.jsx)(ht,{header:a||void 0,children:Object(se.jsx)(r,{})}):Object(se.jsx)(t,{})},Fr=function(){var e=m();return a.a.useEffect((function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ke,payload:{ingredientsRequest:!0}}),e.next=4,N();case 4:(r=e.sent)&&r.success?t({type:we,payload:{ingredients:r.data,ingredientsRequest:!1,ingredientsSuccess:!0}}):t({type:De,payload:{ingredients:[],ingredientsRequest:!1,ingredientsSuccess:!1,error:r.error}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ce,{}),Object(se.jsxs)(i.d,{children:[Object(se.jsx)(i.b,{exact:!0,path:"./",children:Object(se.jsx)(Rt,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/feed",children:Object(se.jsx)(_r,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/feed/:id",children:Object(se.jsx)(zr,{ComponentPage:hr,ComponentModal:xr,modalName:"feedOrder",modalHeader:void 0})}),Object(se.jsx)(i.b,{exact:!0,path:"/ingredients/:id",children:Object(se.jsx)(zr,{ComponentPage:tr,ComponentModal:be,modalName:"ingredient",modalHeader:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(se.jsx)(Gr,{path:"/profile/orders/:id",children:Object(se.jsx)(zr,{ComponentPage:hr,ComponentModal:xr,modalName:"profileOrder",modalHeader:void 0})}),Object(se.jsx)(Gr,{path:"/profile",children:Object(se.jsx)(Zt,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/login",children:Object(se.jsx)(Tt,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/register",children:Object(se.jsx)(It,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/forgot-password",children:Object(se.jsx)(Et,{})}),Object(se.jsx)(i.b,{exact:!0,path:"/reset-password",children:Object(se.jsx)(Ct,{})}),Object(se.jsx)(i.b,{exact:!0,path:"*",children:Object(se.jsx)(Vt,{})})]})]})},Wr=function(){return Object(se.jsx)(p.a,{store:qr,children:Object(se.jsx)(o.a,{children:Object(se.jsx)(Fr,{})})})},Hr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,219)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(se.jsx)(a.a.StrictMode,{children:Object(se.jsx)(Wr,{})}),document.getElementById("root")),Hr()},23:function(e,t,r){e.exports={profile:"profile_profile__E2DRE",profile__nav:"profile_profile__nav__om5HE",navLink:"profile_navLink__2FM55",active:"profile_active__1_vZi",gray:"profile_gray__3K-Ki",profile__body:"profile_profile__body__1N1_W"}},24:function(e,t,r){e.exports={ordersItem:"profile-orders-item_ordersItem__27Kso",ordersItem__header:"profile-orders-item_ordersItem__header__1l7av",ordersItem__footer:"profile-orders-item_ordersItem__footer__1T2Ag",order__success:"profile-orders-item_order__success__1jbgY",ordersItem__ingredients:"profile-orders-item_ordersItem__ingredients__3IqKy",ordersItem__ingredient:"profile-orders-item_ordersItem__ingredient__YHjd5",ordersItem__counter:"profile-orders-item_ordersItem__counter__30t9i",ordersItem__price:"profile-orders-item_ordersItem__price__3nI71"}},25:function(e,t,r){e.exports={order__box:"order-details_order__box__2oaWE",order__number:"order-details_order__number__Xd6mH",order__success:"order-details_order__success__2XXBF",order__ingredientsBox:"order-details_order__ingredientsBox__2s1De",ingredient:"order-details_ingredient__2ushq",ingredient_img:"order-details_ingredient_img__8ZhIQ",ingredient__title:"order-details_ingredient__title__M2wRG",ingredient__price:"order-details_ingredient__price__1nfIp",order__footer:"order-details_order__footer__1fAqz",order__price:"order-details_order__price__2q2-x"}},26:function(e,t,r){e.exports={header:"app-header_header__J03XO",nav:"app-header_nav__j3r36",logo:"app-header_logo__2okpE",navItem:"app-header_navItem__1pqIK",active:"app-header_active__3RyX5"}},27:function(e,t,r){e.exports={element:"feed-order-element_element__2UkHZ",element__header:"feed-order-element_element__header__3roaq",element__footer:"feed-order-element_element__footer__3_OIx",element__ingredients:"feed-order-element_element__ingredients__1wz0f",element__ingredient:"feed-order-element_element__ingredient__1D5NE",element__counter:"feed-order-element_element__counter__WewV3",element__price:"feed-order-element_element__price__15KKk"}},35:function(e,t,r){e.exports={ingredient:"ingredient_ingredient__HGXoY",ingredient__wrongID:"ingredient_ingredient__wrongID__3gRu_"}},43:function(e,t,r){e.exports={ingredient:"ingredient_ingredient__37deV",ingredient__counter:"ingredient_ingredient__counter__3-YoE",ingredient__price:"ingredient_ingredient__price__2P6l7",ingredient__title:"ingredient_ingredient__title__1gF7b"}},44:function(e,t,r){e.exports={section:"burger-constructor_section__lwusA",dropbox:"burger-constructor_dropbox__27dWX",placeholder:"burger-constructor_placeholder__v6-Ti",dropHover:"burger-constructor_dropHover__4DtMT"}},49:function(e,t,r){},55:function(e,t,r){e.exports={section__flex:"ingredients-section_section__flex__2PyQU"}},56:function(e,t,r){e.exports={modal:"modal_modal__q1M0P",header:"modal_header__2lLuR",modalCloseBtn:"modal_modalCloseBtn__25XUx"}},78:function(e,t,r){e.exports={preloader:"preloader_preloader__2KU95",preloader_description:"preloader_preloader_description__2cmgx"}},79:function(e,t,r){e.exports={priceBox:"constructor-total-price_priceBox__wU3xD",priceIcon:"constructor-total-price_priceIcon__ql694"}},80:function(e,t,r){e.exports={modalFlex:"order-details_modalFlex__28ch9",secondaryColor:"order-details_secondaryColor__2Yksf"}},82:function(e,t,r){e.exports={feed:"feed_feed__vGn3U",feed__heading:"feed_feed__heading__2-HoW"}}},[[211,1,2]]]);
//# sourceMappingURL=main.50573a4a.chunk.js.map